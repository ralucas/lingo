// Generated by CoffeeScript 1.6.3
(function() {
  var createWordsObj, quizWords, quizzo, selectedQuiz, words;

  words = ['hello', 'goodbye', 'watch', 'phone', 'computer', 'taxi', 'hotel', 'country', 'help', 'lost', 'cost', 'alone'];

  selectedQuiz = String;

  quizWords = {};

  quizzo = [];

  createWordsObj = function(arr) {
    var i, _i, _len;
    quizzo.length = 0;
    for (_i = 0, _len = arr.length; _i < _len; _i++) {
      i = arr[_i];
      quizWords = {
        "text": i,
        "from": "eng",
        "to": selectedQuiz
      };
      quizzo.push(quizWords);
    }
    return quizzo;
  };

  $(function() {
    $('#word-form').on('submit', function(event) {
      var langFrom, langTo, word, wordObj;
      event.preventDefault();
      word = $(this).find('#word').val();
      langFrom = $(this).closest('#main').find('#selectFrom option:selected').attr('data-lang');
      langTo = $(this).closest('#main').find('#selectTo option:selected').attr('data-lang');
      wordObj = {
        text: word,
        from: langFrom,
        to: langTo
      };
      $.post('/translate', wordObj, function(data) {
        $('#trans-word').append('<h3>Translated:</h3>' + '<p class="lead">' + data.translation + '</p>');
      });
    });
    $.get('/lang', function(results) {
      var i, _i, _len;
      for (_i = 0, _len = results.length; _i < _len; _i++) {
        i = results[_i];
        if (i['to']['code'] !== 'eng') {
          $('#selectQuiz').append('<option data-lang=' + i['to']['code'] + '>' + i['to']['fullName'] + '</option>');
        }
      }
    });
    $('#selectQuiz').on('change', function() {
      var quizArr;
      selectedQuiz = $('#selectQuiz option:selected').attr('data-lang');
      quizArr = createWordsObj(words);
      console.log(quizArr);
      $.post('/displayQuiz', {
        objArr: quizArr
      }, function(data) {
        console.log(data);
      });
    });
  });

}).call(this);
